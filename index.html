<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="theme-color" content="#0d9488">
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; img-src 'self' blob:; style-src 'self' 'unsafe-inline'">
  <meta name="description" content="Goja 宫将 — The grid artisan, one of a kind.">
  <title>Goja 宫将</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="assets/logo.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="assets/logo-192.svg">
</head>
<body>
  <header class="top-bar">
    <div class="top-bar__brand">Goja</div>
    <p class="top-bar__tagline">Grid craft. One and only.</p>
    <button class="top-bar__settings" id="settingsBtn" aria-label="Settings">
      <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="3"/>
        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/>
      </svg>
    </button>
  </header>

  <main class="main-content">
    <div class="drop-zone" id="dropZone">
      <div class="drop-zone__icon">+</div>
      <div class="drop-zone__text">Drop photos here or tap to select</div>
      <input type="file" id="fileInput" accept="image/*" multiple>
    </div>

    <section class="preview" id="preview">
      <div class="preview__grid" id="previewGrid"></div>
    </section>
  </main>

  <nav class="bottom-bar" id="bottomBar">
    <button class="btn btn-secondary" id="addBtn">+ Add</button>
    <button class="btn btn-primary" id="exportBtn">Export</button>
    <button class="btn btn-secondary" id="clearBtn">Clear</button>
  </nav>

  <div class="settings-backdrop" id="settingsBackdrop"></div>
  <aside class="settings-panel" id="settingsPanel" aria-hidden="true">
    <div class="settings-panel__header">
      <div class="settings-panel__handle"></div>
      <h2>Settings</h2>
      <button class="settings-panel__close" id="settingsCloseBtn" aria-label="Close settings">&times;</button>
    </div>
    <div class="settings-panel__body">
      <fieldset class="settings-section">
        <legend>Grid</legend>
        <div class="control-group">
          <label for="frameWidth">Width</label>
          <input type="number" id="frameWidth" value="1080" min="320" max="4096" step="1">
        </div>
        <div class="control-group">
          <label for="frameHeight">Height</label>
          <input type="number" id="frameHeight" value="1350" min="320" max="4096" step="1">
        </div>
        <div class="control-group">
          <label for="gapSlider">Gap</label>
          <input type="range" id="gapSlider" min="0" max="20" value="4" step="1">
        </div>
        <div class="control-group">
          <label for="imageFit">Image fit</label>
          <select id="imageFit">
            <option value="cover">Fill</option>
            <option value="contain">Full display</option>
          </select>
        </div>
      </fieldset>
      <fieldset class="settings-section">
        <legend>Export</legend>
        <div class="control-group">
          <label for="bgColor">Background</label>
          <input type="color" id="bgColor" value="#ffffff">
        </div>
        <div class="control-group">
          <label for="formatSelect">Format</label>
          <select id="formatSelect">
            <option value="image/jpeg">JPEG</option>
            <option value="image/png">PNG</option>
          </select>
        </div>
      </fieldset>
      <fieldset class="settings-section">
        <legend>Watermark</legend>
        <div class="control-group">
          <label for="watermarkType">Type</label>
          <select id="watermarkType">
            <option value="none">None</option>
            <option value="text">Free text</option>
            <option value="datetime">Date/time</option>
            <option value="copyright">Copyright</option>
          </select>
        </div>
        <div class="control-group" id="watermarkPosGroup" style="display:none">
          <label for="watermarkPos">Position</label>
          <select id="watermarkPos">
            <option value="bottom-right">Bottom-right</option>
            <option value="center">Center</option>
            <option value="tiled">Tiled</option>
          </select>
        </div>
        <div class="control-group" id="watermarkTextGroup" style="display:none">
          <label for="watermarkText">Text</label>
          <input type="text" id="watermarkText" placeholder="Your name or text" maxlength="50">
        </div>
      </fieldset>
    </div>
  </aside>

  <footer class="footer">
    <span class="version" id="versionLabel"></span>
  </footer>

  <script type="module" src="js/app.js"></script>
</body>
</html>
